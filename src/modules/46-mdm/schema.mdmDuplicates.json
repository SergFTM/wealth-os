{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "MDM Duplicate Candidate",
  "description": "Duplicate candidate pair identified by matching engine",
  "type": "object",
  "required": ["id", "clientId", "recordTypeKey", "candidateAId", "candidateBId", "matchScore", "status", "createdAt"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier"
    },
    "clientId": {
      "type": "string",
      "description": "Client/household reference"
    },
    "recordTypeKey": {
      "type": "string",
      "enum": ["people", "entities", "accounts", "assets"],
      "description": "Type of records being compared"
    },
    "candidateAId": {
      "type": "string",
      "description": "First record ID"
    },
    "candidateBId": {
      "type": "string",
      "description": "Second record ID"
    },
    "matchScore": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "description": "Match confidence score (0-1)"
    },
    "reasonsJson": {
      "type": "array",
      "description": "Match reasons explaining the score",
      "items": {
        "type": "object",
        "properties": {
          "field": { "type": "string" },
          "reason": { "type": "string" },
          "weight": { "type": "number" },
          "valueA": {},
          "valueB": {}
        }
      }
    },
    "status": {
      "type": "string",
      "enum": ["open", "ignored", "merge_in_progress", "merged"],
      "description": "Duplicate candidate status"
    },
    "mergeJobId": {
      "type": "string",
      "description": "Associated merge job if started"
    },
    "ignoredAt": {
      "type": "string",
      "format": "date-time"
    },
    "ignoredBy": {
      "type": "string"
    },
    "ignoredReason": {
      "type": "string"
    },
    "createdAt": {
      "type": "string",
      "format": "date-time"
    }
  }
}
