# Мобильный режим (PWA)

## Зачем PWA для Wealth OS?

Progressive Web App (PWA) позволяет использовать Wealth OS на мобильных устройствах без установки из App Store или Google Play:

- **Мгновенная установка** — добавьте на главный экран за 2 клика
- **Нативный опыт** — полноэкранный режим, иконка приложения, быстрый запуск
- **Работа без сети** — доступ к ключевым данным offline
- **Push уведомления** — оперативные оповещения о важных событиях
- **Экономия ресурсов** — не требует отдельной мобильной разработки

## Offline режим

### Возможности

Offline режим позволяет клиентам и сотрудникам работать без интернет-соединения:

**Для клиентского портала:**
- Просмотр последнего состояния портфеля
- Доступ к сохраненным отчетам
- Просмотр документов
- История сообщений

**Для staff:**
- Список задач и approvals
- Критические risk alerts
- Базовая информация по клиентам
- Offline inbox уведомлений

### Ограничения MVP

> ⚠️ В текущей MVP версии offline реализован как "snapshot" данных, сохраняемый в локальное хранилище. Полноценный Service Worker с интеллектуальным кэшированием требует production-инфраструктуры.

- Данные обновляются только при ручной синхронизации
- Нет автоматической фоновой синхронизации
- Ограниченный объем кэша
- Некоторые интерактивные функции недоступны offline

## Push уведомления

### Типы уведомлений

| Топик | Описание | Аудитория |
|-------|----------|-----------|
| approvals | Запросы на согласование | Staff |
| reports | Новые отчеты готовы | Staff, Client |
| risk | Риск-алерты | Staff |
| invoices | Счета и платежи | Client |
| messages | Новые сообщения | Staff, Client |
| tasks | Задачи и дедлайны | Staff |
| alerts | Системные оповещения | Staff |
| documents | Новые документы | Staff, Client |

### Inbox

Push Inbox — централизованное хранилище всех уведомлений:
- Фильтрация по топикам
- Статус прочтения
- Deep links на соответствующие экраны
- История за 30 дней

### MVP ограничения

> ⚠️ Push уведомления в MVP работают в режиме симуляции. Для production требуются VAPID ключи и push-сервер.

## Quick Actions

Быстрые действия — ярлыки для частых операций на мобильном:

- **Approve** — быстрое согласование заявок
- **View Alert** — просмотр критических алертов
- **Open Report** — переход к отчету
- **Open Task** — открытие задачи
- **Open Thread** — переход в переписку

Quick actions генерируются автоматически на основе:
- Pending approvals
- Critical risk alerts
- New report shares
- Overdue tasks

## Безопасность на мобильном

### Рекомендации

1. **Биометрия** — включите биометрическую аутентификацию (MVP: placeholder)
2. **MFA** — обязательная двухфакторная аутентификация
3. **Auto-lock** — автоматическая блокировка сессии
4. **Remote revoke** — возможность отзыва устройства

### Offline безопасность

- В offline snapshot **НЕ** хранятся:
  - Пароли и токены
  - Полные номера счетов
  - Персональные документы
  - Конфиденциальные данные

- Offline данные:
  - Привязаны к конкретному userId
  - Шифруются в localStorage (в production)
  - Автоматически очищаются при logout

## Управление устройствами

- Регистрация новых устройств
- Просмотр активных сессий
- Управление push-подписками
- Отзыв устройств
- Audit log активности

---

## ⚠️ Дисклеймер MVP

**Offline и push в MVP демонстрационные.**

Для production-использования требуются:
- Service Worker с full offline support
- VAPID ключи для Web Push API
- Push notification сервер
- Инфраструктура для background sync
- Compliance с требованиями App Store / Play Store

Текущая реализация предназначена для демонстрации концепции и UX.
