{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "FundEvent",
  "type": "object",
  "required": ["clientId", "fundId", "eventType", "eventDate", "status"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier"
    },
    "clientId": {
      "type": "string",
      "description": "Client/family ID"
    },
    "fundId": {
      "type": "string",
      "description": "Private capital fund ID (links to pcFunds)"
    },
    "fundName": {
      "type": "string",
      "description": "Fund name for display"
    },
    "eventType": {
      "type": "string",
      "enum": ["capital_call", "distribution", "nav_update", "recallable", "equalization"],
      "description": "Type of fund event"
    },
    "eventDate": {
      "type": "string",
      "format": "date",
      "description": "Event date"
    },
    "dueDate": {
      "type": "string",
      "format": "date",
      "description": "Payment due date (for capital calls)"
    },
    "amount": {
      "type": "number",
      "description": "Event amount"
    },
    "currency": {
      "type": "string",
      "default": "USD",
      "description": "Currency code"
    },
    "status": {
      "type": "string",
      "enum": ["planned", "announced", "recorded", "paid", "cancelled"],
      "description": "Event status"
    },
    "linkedPrivateCapitalEventId": {
      "type": "string",
      "description": "Link to pcCapitalCalls or pcDistributions record"
    },
    "linkedCashFlowId": {
      "type": "string",
      "description": "Link to cashFlows record for liquidity module"
    },
    "navDetailsJson": {
      "type": "object",
      "description": "NAV update details",
      "properties": {
        "previousNav": { "type": "number" },
        "newNav": { "type": "number" },
        "navPerUnit": { "type": "number" },
        "valuationDate": { "type": "string", "format": "date" }
      }
    },
    "callDetailsJson": {
      "type": "object",
      "description": "Capital call details",
      "properties": {
        "callNumber": { "type": "number" },
        "percentCalled": { "type": "number" },
        "cumulativeCalled": { "type": "number" },
        "unfundedCommitment": { "type": "number" },
        "purpose": { "type": "string" }
      }
    },
    "distributionDetailsJson": {
      "type": "object",
      "description": "Distribution details",
      "properties": {
        "distributionType": { "type": "string" },
        "returnOfCapital": { "type": "number" },
        "gains": { "type": "number" },
        "income": { "type": "number" },
        "recallable": { "type": "boolean" }
      }
    },
    "attachmentDocIdsJson": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Document vault attachment IDs"
    },
    "notes": {
      "type": "string",
      "description": "Internal notes"
    },
    "createdAt": {
      "type": "string",
      "format": "date-time"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time"
    }
  }
}
