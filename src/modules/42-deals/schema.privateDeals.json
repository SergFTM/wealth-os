{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "PrivateDeal",
  "type": "object",
  "required": ["clientId", "name", "dealType", "stage"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier"
    },
    "clientId": {
      "type": "string",
      "description": "Client/family ID"
    },
    "name": {
      "type": "string",
      "description": "Deal name/title"
    },
    "dealType": {
      "type": "string",
      "enum": ["subscription", "secondary", "co_invest", "spv", "direct", "fund_commitment"],
      "description": "Type of private deal"
    },
    "stage": {
      "type": "string",
      "enum": ["draft", "in_review", "approved", "executed", "closed"],
      "description": "Deal stage in workflow"
    },
    "amount": {
      "type": "number",
      "description": "Deal amount"
    },
    "currency": {
      "type": "string",
      "default": "USD",
      "description": "Currency code"
    },
    "targetEntityId": {
      "type": "string",
      "description": "Target entity/fund ID"
    },
    "targetEntityName": {
      "type": "string",
      "description": "Target entity/fund name"
    },
    "closeDate": {
      "type": "string",
      "format": "date",
      "description": "Expected or actual close date"
    },
    "termsJson": {
      "type": "object",
      "description": "Key deal terms",
      "properties": {
        "managementFee": { "type": "number" },
        "carriedInterest": { "type": "number" },
        "preferredReturn": { "type": "number" },
        "lockupPeriod": { "type": "string" },
        "redemptionTerms": { "type": "string" },
        "manager": { "type": "string" },
        "legalStructure": { "type": "string" },
        "jurisdiction": { "type": "string" },
        "investmentPeriod": { "type": "string" },
        "fundTerm": { "type": "string" },
        "minimumCommitment": { "type": "number" },
        "additionalTerms": { "type": "string" }
      }
    },
    "checklistId": {
      "type": "string",
      "description": "Associated checklist ID"
    },
    "threadId": {
      "type": "string",
      "description": "Secure communication thread ID"
    },
    "approvalsJsonIds": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Approval record IDs"
    },
    "attachmentDocIdsJson": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Document vault attachment IDs"
    },
    "impactRefsJson": {
      "type": "object",
      "description": "References to impact records",
      "properties": {
        "glPostingIds": {
          "type": "array",
          "items": { "type": "string" }
        },
        "taxLotIds": {
          "type": "array",
          "items": { "type": "string" }
        },
        "cashFlowIds": {
          "type": "array",
          "items": { "type": "string" }
        },
        "performanceImpact": { "type": "string" }
      }
    },
    "taxFlag": {
      "type": "boolean",
      "default": false,
      "description": "Flag for tax implications requiring review"
    },
    "ownerUserId": {
      "type": "string",
      "description": "Deal owner user ID"
    },
    "notes": {
      "type": "string",
      "description": "Internal notes"
    },
    "createdAt": {
      "type": "string",
      "format": "date-time"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time"
    }
  }
}
